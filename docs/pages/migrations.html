
<!DOCTYPE html>
<html>
<head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Ness PHP Framework | Documentation</title>
        <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="../assets/css/style.css"> 
        <!--Load highlightjs package -->
        <link rel="stylesheet" href="../assets/js/highlightjs/styles/atom-one-dark.css">
        <script src="../assets/js/highlightjs/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>      
</head>
<body>
    
<!-- Navigation -->
<nav class="navbar navbar-expand-lg fixed-top bg-light bg-white kb" style="z-index: 1;">
        <div class="container">
            <a class="navbar-brand" href="../index.html">
                <img src="../assets/images/ness_logo.png" title="Ness PHP Framework Documentation" >
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"><i class="fas fa-bars"></i></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link account-link" href="../index.html">Home</a>
                </li>  
                
                <li class="nav-item">
                    <a class="nav-link account-link" href="https://www.github.com/nessphp" target="_blank">GitHub</a>
                    </li>  
    
                    <li class="nav-item">
                    <a class="nav-link account-link" href="https://nessphp.github.io/" target="_blank">Ness PHP</a>
                    </li>  
            </ul>
        </div>
        </div>
    </nav>
<!-- [][][] CONTENTS STARTS HERE [][][] -->
<div class="main-contents">
        <!-- SEARCH AREA -->
        <br>
        <div class="row">
            <div class="col-md-7">   
                
                    <div class="nav-board">
                        <a href="../index.html">Documentation</a> >  Database Migration
                    </div>
            </div>
            <div class="col-md-5">
                <!-- EMPTY -->
            </div>
        </div>
        <br><br><br>
        <div class="container">
            <!-- --------------------- EDIT HERE--------------------- -->
            
            <div class="row">
                <div class="col-md-4">

                    <div class="card bg-dark text-white">
                        <div class="card-header">Required Namespace</div>
                        <div class="card-body" >
                            <ul class="tree">
                                <li style="color:#28A745;">Ness
                                        <ul>
                                            <li>Autopulse
                                                    <ul>
                                                        <li >Factory
                                                        <ul>
                                                            <li style="color:#fff;">Schema</li>
                                                            <li style="color:#fff;">Table</li>
                                                            <li style="color:#fff;">Column</li>
                                                            <li style="color:#fff;">Migration</li>
                                                        </ul>
                                                        
                                                    </li>
                                                </ul>
                                            </li>
                                        </ul>
                                </li>
                            </ul>
                            <hr>
                            <span><small>You can include this library to your code file by typing the below code;</small></span>
                            <br><br>
                            <br><br>
                            <span style="color:#3490CF;">use</span> 
                            <span style="color:#28A745;">Ness\Autopulse\Factory\</span>Schema

                            <br><br>
                            <span style="color:#3490CF;">use</span> 
                            <span style="color:#28A745;">Ness\Autopulse\Factory\</span>Table

                            <br><br>
                            <span style="color:#3490CF;">use</span> 
                            <span style="color:#28A745;">Ness\Autopulse\Factory\</span>Column

                            <br><br>
                            <span style="color:#3490CF;">use</span> 
                            <span style="color:#28A745;">Ness\Autopulse\Factory\</span>Migration
                            
                            
                        </div> 
                    </div>
                    <br><br>
                </div>

                <!-- docs:start-->
                <div class="col-md-8">
                    <br>
                    <h3 style="font-weight: lighter;">Database Migration</h3>
                    <hr>
                    <br>
                    <br><br>
 <!--Content:start-->
 <h4 id="pagedescription">About Database Migration</h4>
 <p>
         Ness PHP Framework supports database migration with its own classes. 
         You simply need to declare tables, columns and connections and you are ready. First of all please include 
         the required packages in your code. You can find the required packages in the left side of this page. 
         After you have done with this you are ready to create migrations and database synch operations.
 </p>
 <!--Content:end-->




  <!--Content:start-->
  <h4 id="schema-class">Schema Class</h4>
  <p>
         Schema class is used to define a database in your code. Hierarchically a schema class must contain;

         <ul>
             <li>schema <br>
                 <ul>
                     <li>Table <br> 
                         <ul>
                             <li>Column</li>
                             <li>Column</li>
                             <li>column x n</li>
                         </ul>    
                     </li>


                     <li>Table <br> 
                         <ul>
                             <li>Column</li>
                             <li>Column</li>
                             <li>column x n</li>
                         </ul>    
                     </li>


                     <li>Table x n <br> 
                         <ul>
                             <li>Column</li>
                             <li>Column</li>
                             <li>column x n</li>
                         </ul>    
                     </li>


                 </ul>    
             </li>
         </ul>


     For example a simple database to store your users and post can be;
     <ul>
             <li>users_database <br>
                 <ul>
                     <li>Users <br> 
                         <ul>
                             <li>userid int AUTO_INREMENT PRIMARY KEY</li>
                             <li>username varchar(25)</li>
                             <li>password varchar(25)</li>
                         </ul>    
                     </li>


                     <li>User Data <br> 
                         <ul>
                             <li>dataid int AUTO_INREMENT PRIMARY KEY</li>
                             <li>userid int not null (FOREIGN KEY TO USERS TABLE AND userid column)</li>
                             <li>name varchar(25)</li>
                             <li>surname varchar(25)</li>
                             <li>email varchar(100) unique</li>
                             <li>phone_number</li>
                         </ul>    
                     </li>

                 </ul>    
             </li>
         </ul>

         <a href="#examples">Please click here for example code to create the table above</a>


         <br><br>



         <h5>Schema:Name</h5>
         <p>
             Set a new name for your database.
             <pre><code class="php">
$schema = new Schema();<br>
$schema->Name(string $database_name);<br>
<br>
<br>
//or
<br>
$schema = new Schema(string $database_name);

</code>
             </pre>
         </p>



         <h5>Schema:Version</h5>
         <p>
                 Set version number to track your migrations. Version number must set for detecting if migration should run.
             <pre><code class="php">
$schema = new Schema(string $database_name);<br>
$schema->Version(int $version_number);<br>
</code>
             </pre>
         </p>

  


  
  <h5>Schema:getName</h5>
  <p>
          Returns the database name
      <pre><code class="php">
$schema = new Schema(string $database_name);<br>
$schema->getName();<br>

<br>
returns: string $database_name</code>
      </pre>
  </p>




  <h5>Schema:Tables</h5>
  <p>
          Set tables to your database
      <pre><code class="php">
$schema = new Schema(string $database_name);<br>
$schema->Version(int $version_number);<br>
$schema->Tables(Table $tb1, Table $tb2, Table $tbn)<br></code>
      </pre>
  </p>



  <h5>Schema:ForeignKey</h5>
         <p>
                 Set Foreign Keys for tables.
             <pre><code class="php">
$schema = new Schema(string $database_name);<br>
$schema->ForeignKey($table1='table1', $key1='column1', $table2='table2', $key2='column2');<br>
$schema->ForeignKey($table1='table2', $key1='column2', $table2='table21', $key2='column21');<br>
$schema->ForeignKey($table1='table_n', $key1='column_n', $table2='table_mn', $key2='column_mn');<br></code>
             </pre>
         </p>
</p>
  <!--Content:end-->


  <br><br><br>

 <h4 id="schema-class">Table Class</h4>
 <p>
         Table class is a helper class for using with your Schema. You can define unlimited tables inside a schema. This helper class is used to generate tables for your database.

         <br><br>

         Here is an example for defining tables;

         <pre><code class="php">
$table1 = new Table("table_name", <br>
new Column("column_id", "column_type", "constraints"),<br>
new Column("column_id_2", "column_type_2", "constraints_2"),<br>
new Column("column_id_n", "column_type_n", "constraints_n"),<br>
);
</code>
         </pre>
 </p>




 <br><br><br>

 <h4 id="column-class">Column Class</h4>
 <p>
         A simple class to generate columns for your database tables.

         <br><br>

         Here is an example for defining columns;

         <pre><code class="php">
$userid = new Column(string "column_name", string  "column_type", string  "constraints");<br>
$password = new Column(string "column_name", string  "column_type", string  "constraints");<br>
<br><br>

$table1 = new Table("table_name", $userid, $password);<br>
</code>
         </pre>
 </p>



 
 <br><br><br>

 <h4 id="migration-class">Migration Class</h4>
 <p>
         Migration class is used to manage; create and drop database operations of your project.

         <h5>Migration:Up</h5>
         <p>
                 Create a database from the given schema.
             <pre><code class="php">
Migration::Up(Schema $database, <a href="mysql.html">MySqlConnect</a> | <a href="dbconnect.html">DbConnect</a> $connection);
</code> </pre>
         </p>
</p>
<br>


<h5>Migration:Down</h5>
         <p>
                 Drop a database from the given schema.
             <pre><code class="php">
Migration::Down(Schema $database, <a href="mysql.html">MySqlConnect</a> | <a href="dbconnect.html">DbConnect</a> $connection);
            </code> </pre>
         </p>
</p>

<br>


<h5>Migration:Synch</h5>
         <p>
                 Keep your database continuously updated independent from version number. Not recommended in production.
             <pre><code class="php">
Migration::Synch(Schema $database, <a href="mysql.html">MySqlConnect</a> | <a href="dbconnect.html">DbConnect</a> $connection);
             </code></pre>
         </p>
</p>

 </p>



 <br><br><br>

 <h4 id="examples">Example</h4>
 <p>
     <img src="../assets/images/autopulse.png"/>
 </p>


                   
            
                </div>
                <!-- docs:end -->


            </div>


            <!-- [/] ------------------- EDIT HERE------------------- -->
        </div>

        <br><br><br>
        <div class="text-center">
            <span>&copy; Ness PHP Framework <span id="the-x">Ness</span> | All Rights Reserved</span>
            <br><br>
        </div>
    </div>  
    <!-- [/][/][/] CONTENTS ENDS HERE [][][] --> 

</body>
</html>